# Gifto Smart Contract Audit Report
<br>

## Preamble
This audit report was undertaken by <b>BlockchainLabs.nz</b> for the purpose of providing feedback to <b>Gifto Limited</b>. <br>It has subsequently been shared publicly without any express or implied warranty.

Solidity contracts were sourced from the public Github repo [github.com/gifto-io/GiftoSmartContract](https://github.com/gifto-io/GiftoSmartContract) prior to commit [cf1ca1e108b3b616691761c52410756de437cb67](https://github.com/gifto-io/GiftoSmartContract/commit/cf1ca1e108b3b616691761c52410756de437cb67) - we would encourage all community members and token holders to make their own assessment of the contracts.

<br>

## Scope
All Solidity code contained in [/GiftoSmartContract](https://github.com/gifto-io/GiftoSmartContract) was considered in scope as a basis for static and dynamic analysis. The scope is outlined in the [work paper](https://github.com/tikonoff/gifto/blob/master/audit/Work_paper.MD).

<br>

## Disclaimer

This document includes opinions and recommendations. All the opinions are our own and
independent of the <b>Gifto</b> team. We found issues in the Solidity code and in the general
design of the system but that doesn’t mean that we found all of the issues.

About the recommendations, they are not intended to be the solutions to the problems. Some
of them may even be bad ideas. They are only included as a starting point for the research of
the solutions.

It’s also important to consider.

- We did not make any low level reviews of the assembly code that will be generated by
the Solidity compiler.
- We did not verify the deployment of the contracts or the initial configuration.
- We did not analyze any of the code other than the Solidity smart contracts.
- We did not analyze the governance mechanism.

Security audits like this one reduce the risks of issues, but they do not warranty bug-free code.
We encourage the community, especially the <b>Gifto</b> community that will be using these
contracts, to continue to analyze the code and to inform themselves before interacting with
these or any other smart contracts.

<br>

## Focus Areas
The audit report is focused on the following key areas - though this is not an exhaustive list.

- **Standards** - Standards fulfillment, such as ERC20Token

- **Procedures** - Risk management, documentation, repository, folder structure, models, white/purple papers, bugs bounty, test -> main network migration

- **Application logic** - Check if code logic matches with the expected (intended) behaviour defined in the documentation and/or white/purple papers

- **Code** - includes the common issues that are usuallyreviewed in all applications: code readability, specification matching, duplicated code, parameter checking, precondition assertions, code conventions, documentation, testing, code coverage, overflow/underflows, unused variables, bounds checking, etc.


<br>


## Classification
### Defect Severity
- Minor - A defect that does not have a material impact on the contract execution and is likely to be subjective.
- Moderate - A defect that could impact the desired outcome of the contract execution in a specific scenario.
- Major - A defect that impacts the desired outcome of the contract execution or introduces a weakness that may be exploited.
- Critical - A defect that presents a significant security vulnerability or failure of the contract across a range of scenarios.

<br>


## Findings

List of all issues: [Github](https://github.com/tikonoff/gifto/issues)

### Minor
- **[Misleading comments](https://github.com/tikonoff/gifto/issues/2)** - `Code` - Lines: [220](https://github.com/gifto-io/GiftoSmartContract/blob/cf1ca1e108b3b616691761c52410756de437cb67/Gifto.sol#L220)
- **[Folder structure has missed](https://github.com/tikonoff/gifto/issues/)** - `Procedures`
- **[Old files are presented](https://github.com/tikonoff/gifto/issues/3)** - `Procedures`
- **[No "view" or "pure" modifiers](https://github.com/tikonoff/gifto/issues/4)** - `Code` - Lines: [230](https://github.com/gifto-io/GiftoSmartContract/blob/cf1ca1e108b3b616691761c52410756de437cb67/Gifto.sol#L230), [239](https://github.com/gifto-io/GiftoSmartContract/blob/cf1ca1e108b3b616691761c52410756de437cb67/Gifto.sol#L239), [249](https://github.com/gifto-io/GiftoSmartContract/blob/cf1ca1e108b3b616691761c52410756de437cb67/Gifto.sol#L249)
- **[Declaration shadows a builtin symbols](https://github.com/tikonoff/gifto/issues/6)** - `Code` - Line: [579](https://github.com/gifto-io/GiftoSmartContract/blob/cf1ca1e108b3b616691761c52410756de437cb67/Gifto.sol#L579)
- **[Implicit storage declaration](https://github.com/tikonoff/gifto/issues/7)** - `Code` - Line: [579](https://github.com/gifto-io/GiftoSmartContract/blob/cf1ca1e108b3b616691761c52410756de437cb67/Gifto.sol#L579)
- **[Push instead pull for internal call](https://github.com/tikonoff/gifto/issues/8)** - `Code` - Line: [155](https://github.com/gifto-io/GiftoSmartContract/blob/cf1ca1e108b3b616691761c52410756de437cb67/Gifto.sol#L155)
- **[Differentiate functions and events](https://github.com/tikonoff/gifto/issues/9)** - `Code` - Line: [30](https://github.com/gifto-io/GiftoSmartContract/blob/cf1ca1e108b3b616691761c52410756de437cb67/Gifto.sol#L30), [33](https://github.com/gifto-io/GiftoSmartContract/blob/cf1ca1e108b3b616691761c52410756de437cb67/Gifto.sol#L33), [360](https://github.com/gifto-io/GiftoSmartContract/blob/cf1ca1e108b3b616691761c52410756de437cb67/Gifto.sol#L360)
- **[Lock pragma to specific compiler version](https://github.com/tikonoff/gifto/issues/11)** - `Code`
- **[Explicit UINT256 vs UINT](https://github.com/tikonoff/gifto/issues/12)** - `Code` - Lines: [358](https://github.com/gifto-io/GiftoSmartContract/blob/cf1ca1e108b3b616691761c52410756de437cb67/Gifto.sol#L358),  [375](https://github.com/gifto-io/GiftoSmartContract/blob/cf1ca1e108b3b616691761c52410756de437cb67/Gifto.sol#L375),  [381](https://github.com/gifto-io/GiftoSmartContract/blob/cf1ca1e108b3b616691761c52410756de437cb67/Gifto.sol#L381),  [404](https://github.com/gifto-io/GiftoSmartContract/blob/cf1ca1e108b3b616691761c52410756de437cb67/Gifto.sol#L404)
- **["Constant" is deprecated](https://github.com/tikonoff/gifto/issues/13)** - `Code` - Lines: [666](https://github.com/gifto-io/GiftoSmartContract/blob/cf1ca1e108b3b616691761c52410756de437cb67/Gifto.sol#L666),  [12](https://github.com/gifto-io/GiftoSmartContract/blob/cf1ca1e108b3b616691761c52410756de437cb67/Gifto.sol#L12),  [171](https://github.com/gifto-io/GiftoSmartContract/blob/cf1ca1e108b3b616691761c52410756de437cb67/Gifto.sol#L171)
- **[Explicitly declare your variables access modifiers](https://github.com/tikonoff/gifto/issues/14)** - `Code` - Line: [444](https://github.com/gifto-io/GiftoSmartContract/blob/cf1ca1e108b3b616691761c52410756de437cb67/Gifto.sol#L444)


### Moderate
- **[No SafeMath Library used](https://github.com/tikonoff/gifto/issues/5)** `Code`
- **[Insufficient gas for the Fallback functions](https://github.com/tikonoff/gifto/issues/10)** - `Code` - Lines: [125](https://github.com/gifto-io/GiftoSmartContract/blob/cf1ca1e108b3b616691761c52410756de437cb67/Gifto.sol#L125), [444](https://github.com/gifto-io/GiftoSmartContract/blob/cf1ca1e108b3b616691761c52410756de437cb67/Gifto.sol#L444)
- **[Integer overflow and underflow](https://github.com/tikonoff/gifto/issues/15)** - `Code` - Line: [141](https://github.com/gifto-io/GiftoSmartContract/blob/cf1ca1e108b3b616691761c52410756de437cb67/Gifto.sol#L141)
- **[Code style inconsistence](https://github.com/tikonoff/gifto/issues/17)** - `Code` - Lines: [36](https://github.com/gifto-io/GiftoSmartContract/blob/cf1ca1e108b3b616691761c52410756de437cb67/Gifto.sol#L36), [460](https://github.com/gifto-io/GiftoSmartContract/blob/cf1ca1e108b3b616691761c52410756de437cb67/Gifto.sol#L460), [214](https://github.com/gifto-io/GiftoSmartContract/blob/cf1ca1e108b3b616691761c52410756de437cb67/Gifto.sol#L214), [37](https://github.com/gifto-io/GiftoSmartContract/blob/cf1ca1e108b3b616691761c52410756de437cb67/Gifto.sol#L37), [39](https://github.com/gifto-io/GiftoSmartContract/blob/cf1ca1e108b3b616691761c52410756de437cb67/Gifto.sol#L39), [40](https://github.com/gifto-io/GiftoSmartContract/blob/cf1ca1e108b3b616691761c52410756de437cb67/Gifto.sol#L40), [358](https://github.com/gifto-io/GiftoSmartContract/blob/cf1ca1e108b3b616691761c52410756de437cb67/Gifto.sol#L358)
- **[Absence of the Documentation](https://github.com/tikonoff/gifto/issues/18)** - `Procedures`
- **[No risks management detected](https://github.com/tikonoff/gifto/issues/20)** - `Procedures`
- **[The contract is not upgradable](https://github.com/tikonoff/gifto/issues/19)** - `Application logic`

 
### Major
- **[Race Condition is possible](https://github.com/tikonoff/gifto/issues/1)** - `Code` - Line: [132](https://github.com/gifto-io/GiftoSmartContract/blob/cf1ca1e108b3b616691761c52410756de437cb67/Gifto.sol#L132)
- **[DoS with block gas limit](https://github.com/tikonoff/gifto/issues/16)** - `Code` - Line: [291](https://github.com/gifto-io/GiftoSmartContract/blob/cf1ca1e108b3b616691761c52410756de437cb67/Gifto.sol#L291)

### Critical
- None found

<br>

## Dynamic Analysis
Coverage: ???%

[Coverage screenshot]


Build: [travis-ci.org/gabriel-canaan/gifto/builds/1234](https://travis-ci.org/)

<br>

## Gas Consumption

Upon finalization of the contracts to be used by Gifto, the contracts were assessed on the gas usage of each function to ensure there aren't any unforeseen issues with exceeding the block size GasLimit. A detailed report can be found in [./Gas_Consumption.md](https://github.com/tikonoff/gifto/blob/master/audit/Gas_consumption_report.md).

<br>

## Functional tests

Functions were tested according the business scenario and available here [./kovan-functional-tests.md](https://github.com/tikonoff/gifto/blob/master/audit/kovan-functional-tests.md)

<br>


## Conclusion
Of the issues we have raised all of them are minor. 
This crowdsale has a low risk of ethereum being hacked or stolen.

<br>
